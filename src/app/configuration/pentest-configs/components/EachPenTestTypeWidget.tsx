'use client';

import { useState } from 'react';
import { useRouter } from 'next/navigation';
import { RiSettings5Line } from "@remixicon/react";
import { Card } from "@tremor/react";
import GlobalLoader from '@/components/GlobalLoader';

export default function EachPenTestTypeWidget({ item }: { item: any }) {
    const router = useRouter();
    const [loading, setLoading] = useState(false);

    const handleClick = () => {
        setLoading(true);
        router.push(item.href);
    };

    return (
        <>
            {loading && <GlobalLoader />}

            <Card
                key={item.name}
                onClick={handleClick}
                className="relative flex flex-col cursor-pointer rounded-lg justify-between 
          hover:bg-tremor-background-muted 
          hover:dark:bg-dark-tremor-background-muted transition-colors"
            >
                <div className="flex items-center space-x-3">
                    <span
                        className="flex size-12 shrink-0 items-center 
              justify-center text-primary rounded-md border 
              border-tremor-border p-1 dark:border-dark-tremor-border"
                    >
                        {item.icon}
                    </span>
                    <dt className="font-medium text-widget-mainHeader">
                        <span className="focus:outline-none">{item.name}</span>
                    </dt>
                </div>

                <div className="mt-4 flex flex-1 flex-col">
                    <div className="flex-1">
                        <dd className="text-tremor-default leading-6 text-widget-mainDesc">
                            {item.description}
                        </dd>
                    </div>
                    <div className="mt-6 flex items-center space-x-2">
                        <RiSettings5Line
                            className="size-5 text-tremor-content-subtle dark:text-dark-tremor-content-subtle"
                            aria-hidden={true}
                        />
                        <p className="text-tremor-default text-tremor-content dark:text-dark-tremor-content">
                            {item.configurationCount > 1
                                ? `${item.configurationCount} Configurations`
                                : `${item.configurationCount} Configuration`}
                        </p>
                    </div>
                </div>
            </Card>
        </>
    );
}
