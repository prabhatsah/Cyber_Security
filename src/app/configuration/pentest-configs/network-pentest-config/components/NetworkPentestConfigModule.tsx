"use client"

import { useState } from "react"
import { Card, CardContent, CardHeader, CardTitle } from "@/components/ui/card"
import { Button } from "@/components/ui/button"
import { Dialog, DialogContent, DialogHeader, DialogTitle, DialogTrigger } from "@/components/ui/dialog"
import { MoreHorizontal, Plus, Edit, Trash2 } from "lucide-react"
import { DropdownMenu, DropdownMenuContent, DropdownMenuItem, DropdownMenuTrigger } from "@/components/ui/dropdown-menu"
import { NetworkPentestConfigForm } from "./NetworkPentestConfigForm"
import AddNetworkPentestBtnWithFormModal from "./AddNetworkPentestBtnWithFormModal"
import { NetworkDetails, NetworkPentestFullInstanceData } from "@/app/NetworkPentestType"
import EachNetworkPentestWidget from "./EachNetworkPentestWidget"

interface NetworkPentestConfig {
    id: string
    clientName: string
    configName: string
    scopeType: string
    aggressiveness: string
    createdBy: string
    createdOn: string
}

const mockNetworkPentestConfigs: NetworkPentestFullInstanceData[] = [
    {
        pentest_id: "KER-NET-2508001",
        client_name: "Carta Worldwide",
        pentest_name: "Canadian Internal Network Pentest - Q3 2025",
        pentest_description: "Canadian Internal Network Pentest - Q3 2025",
        aggressiveness: "Normal",
        progress: 10,
        scope_type: "CIDR Network Range",
        ip_addresses: [],
        start_ip: "",
        end_ip: "",
        cidr_range: "192.168.1.0/24",
        hostname: "",
        allowed_actions: ["exploitation"],
        probe_id: "fae9d00f-bc18-4017-901a-109eddc35cf1",
        probe_name: "Cyber Security - Sayan",
        probe_machine_hostname: "KERLPTP-47",
        probe_machine_ip_address: "192.168.3.35",
        probe_machine_os: "Windows",
        agent_ip: "192.168.3.35",
        subnet_mask: "255.255.255.0",
        default_gateway: "192.168.3.250",
        created_by_id: "be7a0ece-f3d8-4c5b-84dc-52c32c4adff4",
        created_by_login: "K2211089",
        created_on: "07-Apr-2025 13:38",
    },
    // {
    //     pentestId: "KER-NET-2508002",
    //     clientName: "TechCorp Solutions",
    //     pentestName: "External Infrastructure Assessment",
    //     pentestDescription: "External Infrastructure Assessment",
    //     aggressiveness: "Stealthy",
    //     progress: 10,
    //     scopeType: "Array of IPs",
    //     ipAddresses: ["192.168.1.7", "192.168.1.8", "192.168.1.11", "192.168.1.17"],
    //     startIp: "",
    //     endIp: "",
    //     cidrRange: "",
    //     hostName: "",
    //     allowedActions: ["exploitation", "passwordAttacks"],
    //     agentIp: "192.168.3.45",
    //     subnetMask: "255.255.255.0",
    //     defaultGateway: "192.168.3.250",
    //     createdBy: {
    //         userId: "651e7697-dad5-4103-bc7c-3dfbbd31a2ef",
    //         userName: "Sumalya Mukherjee"
    //     },
    //     createdOn: "30-Jun-2025 20:09",
    // },
]

export function NetworkPentestConfigModule() {
    const [configurations, setConfigurations] = useState<NetworkPentestFullInstanceData[]>(mockNetworkPentestConfigs)

    return (
        <div className="space-y-6">
            <div className="flex justify-between items-center">
                <div>
                    <h2 className="text-xl font-semibold text-blue-400 mb-1">
                        Network Pentest Configurations
                        <span className="ml-2 text-sm bg-blue-600 text-white px-2 py-1 rounded-full">{configurations.length}</span>
                    </h2>
                </div>

                <AddNetworkPentestBtnWithFormModal />
            </div>

            <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                {configurations.map((config) => (
                    <EachNetworkPentestWidget key={config.pentest_id} pentestBasicDetails={config} />
                ))}
            </div>
        </div>
    )
}
