"use client"

import { useState } from "react"
import { Card, CardContent, CardHeader, CardTitle } from "@/components/ui/card"
import { Button } from "@/components/ui/button"
import { Dialog, DialogContent, DialogHeader, DialogTitle, DialogTrigger } from "@/components/ui/dialog"
import { MoreHorizontal, Plus, Edit, Trash2 } from "lucide-react"
import { DropdownMenu, DropdownMenuContent, DropdownMenuItem, DropdownMenuTrigger } from "@/components/ui/dropdown-menu"
import { NetworkPentestConfigForm } from "./NetworkPentestConfigForm"
import AddNetworkPentestBtnWithFormModal from "./AddNetworkPentestBtnWithFormModal"
import { NetworkDetails } from "@/app/pen-test/network-pen-test/components/type"
import EachNetworkPentestWidget from "./EachNetworkPentestWidget"

interface NetworkPentestConfig {
    id: string
    clientName: string
    configName: string
    scopeType: string
    aggressiveness: string
    createdBy: string
    createdOn: string
}

const mockNetworkPentestConfigs: NetworkDetails[] = [
    {
        pentestId: "KER-NET-2508001",
        clientName: "Carta Worldwide",
        pentestName: "Canadian Internal Network Pentest - Q3 2025",
        pentestDescription: "Canadian Internal Network Pentest - Q3 2025",
        aggressiveness: "Normal",
        progress: 10,
        scopeType: "CIDR Network Range",
        ipAddresses: [],
        startIp: "",
        endIp: "",
        cidrRange: "192.168.1.0/24",
        hostName: "",
        allowedActions: ["exploitation"],
        agentIp: "192.168.3.35",
        subnetMask: "255.255.255.0",
        defaultGateway: "192.168.3.250",
        createdBy: {
            userId: "be7a0ece-f3d8-4c5b-84dc-52c32c4adff4",
            userName: "Sayan Roy"
        },
        createdOn: "07-Apr-2025 13:38",
    },
    {
        pentestId: "KER-NET-2508002",
        clientName: "TechCorp Solutions",
        pentestName: "External Infrastructure Assessment",
        pentestDescription: "External Infrastructure Assessment",
        aggressiveness: "Stealthy",
        progress: 10,
        scopeType: "Array of IPs",
        ipAddresses: ["192.168.1.7", "192.168.1.8", "192.168.1.11", "192.168.1.17"],
        startIp: "",
        endIp: "",
        cidrRange: "",
        hostName: "",
        allowedActions: ["exploitation", "passwordAttacks"],
        agentIp: "192.168.3.45",
        subnetMask: "255.255.255.0",
        defaultGateway: "192.168.3.250",
        createdBy: {
            userId: "651e7697-dad5-4103-bc7c-3dfbbd31a2ef",
            userName: "Sumalya Mukherjee"
        },
        createdOn: "30-Jun-2025 20:09",
    },
]

export function NetworkPentestConfigModule() {
    const [configurations, setConfigurations] = useState<NetworkDetails[]>(mockNetworkPentestConfigs)

    return (
        <div className="space-y-6">
            <div className="flex justify-between items-center">
                <div>
                    <h2 className="text-xl font-semibold text-blue-400 mb-1">
                        Network Pentest Configurations
                        <span className="ml-2 text-sm bg-blue-600 text-white px-2 py-1 rounded-full">{configurations.length}</span>
                    </h2>
                </div>

                <AddNetworkPentestBtnWithFormModal />
            </div>

            <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                {configurations.map((config) => (
                    <EachNetworkPentestWidget key={config.pentestId} pentestBasicDetails={config} />
                ))}
            </div>
        </div>
    )
}
