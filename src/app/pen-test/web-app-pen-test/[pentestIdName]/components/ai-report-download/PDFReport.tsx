import {
  Document,
  Page,
  Text,
  View,
  StyleSheet,
  Image,
} from '@react-pdf/renderer';
import ContentsPage from './ContentsPage';
import CoverPage from './CoverPage';
import CompanyIntroPage from './CompanyIntroPage';
import GenericContentHeaderPage from './GenericContentHeaderPage';
import ContextAndApproachPage from './ContextAndApproachPage';
import MandatePhasePage from './MandatePhasePage';
import PenTestPage1 from './PenTestPage1';
import PenTestRecommendationPage from './PenTestRecommendationPage';
import PenTestConclusionPage from './PenTestConclusionPage';
import TestingIntroPage from './TestingIntroPage';
import PenTestObjScopePage from './PenTestObjScopePage';
import ReconnaissancePage from './ReconnaissancePage';
import OwaspEachVulIntroPage from './OwaspEachVulIntroPage';

let companyFullLogoUrl = process.env.NEXT_PUBLIC_BASE_PATH || `http://localhost:${process.env.NEXT_PUBLIC_PORT || 3000}`;
companyFullLogoUrl += "/cyber-security/assets/images/company-full-logo.png";

let companyLogoUrl = process.env.NEXT_PUBLIC_BASE_PATH || `http://localhost:${process.env.NEXT_PUBLIC_PORT || 3000}`;
companyLogoUrl += "/cyber-security/assets/images/company-logo.png";

export const PDFReport = () => {
  const tableOfContents = [
    {
      title: 'Executive Summary', page: 1,
      subItems: [
        { title: 'Context of the Mandate', page: 2 },
        { title: 'Our Testing Approach', page: 2 },
        {
          title: 'Phases of the Mandate', page: 3,
          subItems: [
            { title: 'Web Application', page: 4 },
          ]
        },
        { title: 'Summary of Findings & Recommendations', page: 5 },
        { title: 'Conclusion & Next Steps', page: 7 },
      ]
    },
    {
      title: 'Web Application Penetration Testing', page: 8,
      subItems: [
        { title: 'Objective', page: 9 },
        { title: 'Scope', page: 9 },
        { title: 'Attack Scenario', page: 10 },
        { title: 'Cleanup', page: 19 },
        {
          title: 'Missing Security Controls', page: 20,
          subItems: [
            { title: '1.1 Missing HTTP Strict Transport Security (HSTS)', page: 21 },
            { title: '1.1 Inadequate Dependency Management Process ', page: 23 },
          ]
        },
        {
          title: 'Vulnerabilities & Recommendations', page: 25,
          subItems: [
            { title: '1.3 User Enumeration', page: 26 },
            { title: '1.4 Information Disclosure', page: 29 },
            { title: '1.5 Multiple Cryptographic Weaknesses (TLS)', page: 31 },
            { title: '1.6 Detailed Error Message', page: 34 },
          ]
        }
      ]
    },
    {
      title: 'Appendix', page: 36,
      subItems: [
        { title: 'Appendix 1 - Testing Methodology', page: 37 },
        { title: 'Appendix 2 - Assessment of Security Control Mechanisms', page: 38 },
        { title: 'Appendix 3 - Vulnerability Scoring', page: 39 },
        { title: 'Appendix 4 - Test Appreciation Levels', page: 41 },
      ]
    },
  ];


  return (
    <Document>
      <CoverPage companyFullLogoSrc={companyFullLogoUrl} companyLogoSrc={companyLogoUrl} />
      <CompanyIntroPage companyFullLogoSrc={companyFullLogoUrl} companyLogoSrc={companyLogoUrl} />
      <ContentsPage contents={tableOfContents} companyLogoSrc={companyLogoUrl} />
      <GenericContentHeaderPage companyLogoSrc={companyLogoUrl} pageTitle='Executive Summary' />
      <ContextAndApproachPage companyLogoSrc={companyLogoUrl} />
      <MandatePhasePage companyLogoSrc={companyLogoUrl} />
      <PenTestPage1 companyLogoSrc={companyLogoUrl} />
      <PenTestRecommendationPage companyLogoSrc={companyLogoUrl} />
      <PenTestConclusionPage companyLogoSrc={companyLogoUrl} />
      <TestingIntroPage companyLogoSrc={companyLogoUrl} />
      <PenTestObjScopePage companyLogoSrc={companyLogoUrl} />
      <ReconnaissancePage companyLogoSrc={companyLogoUrl} />
      <OwaspEachVulIntroPage companyLogoSrc={companyLogoUrl} />
    </Document>
  )
};
