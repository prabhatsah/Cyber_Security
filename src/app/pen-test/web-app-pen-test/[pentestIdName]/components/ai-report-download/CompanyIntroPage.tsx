import React from 'react';
import { Page, Text, View, StyleSheet, Image, Link } from '@react-pdf/renderer';
import { BasicDetails } from '../../../components/type';
import { format } from 'date-fns';

const styles = StyleSheet.create({
  page: {
    flexDirection: 'row',
    justifyContent: 'space-between',
    alignItems: 'center',
    backgroundColor: '#fff',
    padding: 40,
    fontFamily: 'Helvetica',
    fontSize: 11,
    color: '#545355',
  },
  backgroundImage: {
    position: 'absolute',
    top: '20%',
    width: 500,
    opacity: 0.1,
  },
  leftSection: {
    width: '55%',
    height: '70%',
    justifyContent: 'space-between',
    paddingRight: 20,
  },
  rightSection: {
    width: '40%',
    height: '70%',
    justifyContent: 'space-between',
    paddingLeft: 20,
  },
  companyName: {
    fontSize: 36,
    color: '#343335',
    marginBottom: 10,
  },
  sectionTitle: {
    fontSize: 10,
    fontWeight: 'bold',
    marginTop: 8,
    marginBottom: 2,
  },
  sectionText: {
    fontSize: 10,
    textAlign: 'justify',
    lineHeight: 1.5,
  },
  targetUrl: {
    fontSize: 12,
    color: '#4f46e5',
    marginBottom: 12,
  },
  logo: {
    width: 100,
    marginBottom: 20,
  },
  title: {
    fontSize: 24,
    color: '#343335',
    marginBottom: 8,
    textAlign: 'left',
  },
  paragraph: {
    fontSize: 10,
    textAlign: 'justify',
    marginBottom: 20,
    lineHeight: 1.5,
  },
  contactInfo: {
    fontSize: 9,
    lineHeight: 1.4,
    textAlign: 'left',
  },
  contactHighlight: {
    color: '#4f46e5',
    textDecoration: 'none',
  },
  disclaimer: {
    fontSize: 6,
    marginTop: 30,
    textAlign: 'left',
    lineHeight: 1.4,
    color: '#7e7e7f',
  },
});

interface IntroPageProps {
  companyFullLogoSrc: string;
  companyLogoSrc: string;
  pentestBasicDetails: BasicDetails;
}

const CompanyIntroPage: React.FC<IntroPageProps> = ({
  companyFullLogoSrc,
  companyLogoSrc,
  pentestBasicDetails,
}) => {
  const startDate = format(pentestBasicDetails.startDate, 'MMMM dd, yyyy');
  const endDate = format(pentestBasicDetails.endDate, 'MMMM dd, yyyy');

  return (
    <Page size="A4" style={styles.page}>
      {/* Background Logo */}
      <Image src={companyLogoSrc} style={styles.backgroundImage} />

      {/* Left Section */}
      <View style={styles.leftSection}>
        <Text style={styles.companyName}>{pentestBasicDetails.pentestName}</Text>

        <View>
          <Text style={styles.sectionTitle}>Start Date:</Text>
          <Text style={styles.sectionText}>{startDate}</Text>

          <Text style={styles.sectionTitle}>Testing Period:</Text>
          <Text style={styles.sectionText}>{`${startDate} - ${endDate}`}</Text>

          <Text style={styles.sectionTitle}>Delivery Date:</Text>
          <Text style={styles.sectionText}>{endDate}</Text>

          <Text style={styles.sectionTitle}>Testing Type:</Text>
          <Text style={styles.sectionText}>{pentestBasicDetails.testingType}</Text>

          <Text style={styles.sectionTitle}>Target URL:</Text>
          <Text style={styles.targetUrl}>{pentestBasicDetails.target}</Text>
        </View>

        <View>
          <Text style={styles.sectionTitle}>Testing Objective:</Text>
          <Text style={styles.sectionText}>
            The objective of this penetration test was to simulate real-world attack scenarios and evaluate the security posture of the target system or application. By focusing on the OWASP Top 10 vulnerabilities and related threat categories, this engagement aimed to identify exploitable weaknesses, assess potential impacts, and provide actionable recommendations to improve the client’s overall security resilience.
          </Text>
        </View>

        <View>
          <Text style={styles.sectionTitle}>Disclaimer:</Text>
          <Text style={styles.sectionText}>
            This security assessment was conducted with prior written consent and authorization from the client. All testing activities were performed in alignment with the agreed scope, duration, and methodology. The engagement strictly adhered to ethical standards and best practices to ensure that the client’s systems and data were not harmed, disrupted, or accessed beyond the authorized boundaries. The results, findings, and recommendations are intended solely for the client's internal use.
          </Text>
        </View>
      </View>

      {/* Right Section */}
      <View style={styles.rightSection}>
        <Image src={companyFullLogoSrc} style={styles.logo} />

        <View>
          <Text style={styles.title}>Preliminary Report</Text>
          <Text style={styles.paragraph}>
            For us, security only makes sense when it supports an organization in reaching
            its strategic and operational objectives. You can count on us as your long-term
            partner in helping you assess, design, implement or operate all the elements of
            information security to face today’s and tomorrow’s threats.
          </Text>

          <Text style={styles.contactInfo}>
            This confidential document was prepared by{'\n'}
            <Text style={styles.contactHighlight}>Keross</Text>{'\n'}
            RAKIA Amenity Center, 12th Floor, Tower #1,{'\n'}
            Al Jazeera Al Hamra, PO. Box 31291,{'\n'}
            Ras Al Khaimah, United Arab Emirates{'\n\n'}
            <Text style={styles.contactHighlight}>info@keross.com</Text>{'\n'}
            <Link style={styles.contactHighlight} src="https://www.keross.com/">
              www.keross.com
            </Link>{'\n\n'}
            Report Contact:{'\n'}
            Prabhat Kumar{'\n'}
            Senior Software Engineer, Keross{'\n'}
            <Text style={styles.contactHighlight}>prabhat.kumar@keross.com</Text>
          </Text>
        </View>

        <Text style={styles.disclaimer}>
          CONFIDENTIALITY AND READER’S COMMITMENT{'\n'}
          By reading this document, the reader acknowledges and commits to respect its
          confidentiality. The reader acknowledges that by reading this document, he/she has
          access to confidential and proprietary information which must be treated as
          confidential. The reader hereby agrees not to disclose, copy or distribute this
          document and the information herein to third parties, unless specifically authorized.
          Any disclosure or misuse may result in disciplinary or legal consequences.
        </Text>
      </View>
    </Page>
  );
};

export default CompanyIntroPage;
