import {
    Table,
    TableBody,
    TableCell,
    TableHead,
    TableHeaderCell,
    TableRoot,
    TableRow,
} from "@/components/Table";
import { DonutChart } from "@tremor/react";
import React from "react";

interface NetMap {
    netblock: string;
    asn: string;
    asn_name: string;
    hosting?: string;
}

type SubdomainReportProps = {
    networks: NetMap[];
};
console.log("From subdomain module")
const _severity = [
    {
        severity: "Critical",
        count: 5,
        borderColor: "bg-red-900",
    },
    {
        severity: "High",
        count: 6,
        borderColor: "bg-red-500",
    },
    {
        severity: "Medium",
        count: 8,
        borderColor: "bg-yellow-500",
    },
    {
        severity: "Low",
        count: 3,
        borderColor: "bg-green-800",
    },
    {
        severity: "Info",
        count: 2,
        borderColor: "bg-blue-600",
    },
];
export default function NetMapReport({ networks, networkDescription }: SubdomainReportProps) {
    return (
        <div className="flex-1 overflow-y-auto">
            <p className="text-lg">IP address & Network Infrastructure Analysis</p>
            <p>{networkDescription}</p>
            <div className="flex">

                <div className="lg:w-[80%] w-full max-h-64 overflow-y-auto">
                    <TableRoot>
                        <Table>
                            <TableHead>
                                <TableRow>
                                    <TableHeaderCell>Netblock</TableHeaderCell>
                                    <TableHeaderCell>ASN</TableHeaderCell>
                                    <TableHeaderCell>ASN Name Hint (Organization)</TableHeaderCell>
                                    <TableHeaderCell>FQDNs hosted within this Netblock</TableHeaderCell>
                                </TableRow>
                            </TableHead>

                            <TableBody>
                                {networks.map(({ netblock, asn, asn_name, hosting }, idx) => (
                                    <TableRow key={netblock ?? idx}>
                                        <TableCell>{netblock}</TableCell>
                                        <TableCell>{asn || "-"}</TableCell>
                                        <TableCell>{asn_name || "-"}</TableCell>
                                        <TableCell>{hosting || "-"}</TableCell>
                                    </TableRow>
                                ))}

                            </TableBody>
                        </Table>
                    </TableRoot>
                </div>
                <div className="lg:w-[20%] w-full relative ">
                    <DonutChart data={_severity} category="count" index="severity" className="h-64"
                        colors={["red", "rose", "yellow", "green", "blue"]}
                    />
                </div>
            </div>

        </div>
    );
}
