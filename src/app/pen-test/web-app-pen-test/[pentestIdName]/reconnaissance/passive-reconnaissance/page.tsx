import { ScanLine } from "lucide-react";
import { Button } from "@/components/Button";
import StartScan from "@/utils/generic-start-scan";
import { getLoggedInUserProfile } from "@/ikon/utils/api/loginService";

export default async function PassiveReconnaissance({ params }: { params: { pentestIdName: string } }) {
    const pentestIdName = params.pentestIdName;
    const [pentestId, pentestNameInUrl] = pentestIdName.split("_");
    // const pentestName = pentestNameInUrl.split('-').map(word => word.charAt(0).toUpperCase() + word.slice(1)).join(' ');

    async function handleInitiatePassiveRecon() {
        const userId = (await getLoggedInUserProfile()).USER_ID;
        const nmapResult = await StartScan(userId, "nmap", webApp, pentestId);
    }

    return <>
        <h1>Passive Reconnaissance</h1>
        <Button onClick={handleInitiatePassiveRecon} variant="primary" className="flex items-center gap-2">
            <ScanLine className="h-5 w-5" />
            Refresh Passive Reconnaissance
        </Button>
    </>
}