import { Cpu, EthernetPort, Network } from "lucide-react";
import { portsData, subDomainsData, technologiesData, } from "../components/ReconnaissanceDummyData";
import OverviewTopWidget from "./components/OverviewTopWidget";
import TopFiveCriticalDataWidget from "./components/TopFiveCriticalDataWidget";
import OverviewChartWidget from "./components/OverviewChartWidget";
import { Card, Title } from "@tremor/react";
import { BasicInfoWidget } from "@/components/BasicInfoWidget";

export interface BasicInfoWidgetData {
    name: string;
    value: string;
}

export default function ActiveReconnaissanceOverview() {

    const basicInfoWidgetData: BasicInfoWidgetData[] = [
        {
            name: "Title",
            value: technologiesData.domainOverview.title,
        },
        {
            name: "URL/Domain",
            value: technologiesData.domainOverview.redirect,
        },
        {
            name: "IP Address",
            value: portsData.ip,
        },
        {
            name: "Server",
            value: technologiesData.domainOverview.server,
        },
        {
            name: "Operating System",
            value: technologiesData.domainOverview.os,
        },
        {
            name: "Status",
            value: technologiesData.domainOverview.status,
        }
    ];

    const overviewTopWidgetData = [
        {
            title: "Sub Domains Discovered",
            value: subDomainsData.length,
            Icon: Network
        },
        {
            title: "Open Ports Discovered",
            value: portsData.ports.length,
            Icon: EthernetPort
        },
        {
            title: "Technologies Identified",
            value: technologiesData.detectedTechnologies.join(", "),
            Icon: Cpu
        }
    ];

    const subDomains = subDomainsData.map(eachSubDomain => eachSubDomain.target);
    const ports = portsData.ports.map(eachPorts => eachPorts.port);
    const technologies = [...technologiesData.detectedTechnologies];

    return (
        <>
            <div className="flex flex-col gap-3">
                <OverviewTopWidget overviewTopWidgetData={overviewTopWidgetData} />
                <div className="flex items-stretch gap-3">
                    <div className="flex-1">
                        <OverviewChartWidget />
                    </div>
                    <Card className="flex flex-col gap-3 p-4 rounded-md">
                        <Title className="font-bold text-widget-title text-widgetHeader">Basic Information</Title>
                        <BasicInfoWidget items={basicInfoWidgetData} useDefault={false} />
                    </Card>
                </div>
                <TopFiveCriticalDataWidget subDomains={subDomains} ports={ports} technologies={technologies} />
            </div>
        </>
    )
}