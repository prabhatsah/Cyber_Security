import { RenderAppBreadcrumb } from "@/components/app-breadcrumb";
import { EnumerationPanel } from "./components/EnumerationPanel";
import { adServerWithCredResp, adServerWithoutCredResp, nonAdServerResp, parseEnum4LinuxAD, parseEnum4LinuxGeneric } from "./components/EnumerationDummyData";

export default async function HostConfirmation({
    params,
}: {
    params: Promise<{ pentestIdName: string }>;
}) {
    const pentestIdName = (await params).pentestIdName;
    const [pentestId, pentestName] = decodeURIComponent(pentestIdName).split("_");

    // console.log("Parsed AD Server Response: ", { ...parseEnum4LinuxAD(adServerWithCredResp), ...parseEnum4LinuxGeneric(adServerWithCredResp) });
    console.log("Parsed AD Server Response: ", parseEnum4LinuxAD(adServerWithCredResp));
    console.log("Parsed AD Server Without Cred Response: ", parseEnum4LinuxGeneric(adServerWithoutCredResp));
    console.log("Parsed Non-AD Server Response: ", parseEnum4LinuxGeneric(nonAdServerResp));

    return (
        <>
            <RenderAppBreadcrumb
                breadcrumb={{
                    level: 0,
                    title: "Penetration Testing",
                    href: "/pen-test",
                }}
            />
            <RenderAppBreadcrumb
                breadcrumb={{
                    level: 1,
                    title: "Network Penetration Testing",
                    href: "/pen-test/network-pen-test",
                }}
            />
            <RenderAppBreadcrumb
                breadcrumb={{
                    level: 2,
                    title: pentestName,
                }}
            />
            <RenderAppBreadcrumb
                breadcrumb={{
                    level: 3,
                    title: "Enumeration",
                    href: `/pen-test/network-pen-test/${pentestIdName}/enumeration`,
                }}
            />

            <div className='h-full overflow-auto pb-3'>
                <EnumerationPanel pentestIdName={pentestIdName} />
            </div>
        </>
    )
}
