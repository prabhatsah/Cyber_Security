"use client";

import { useEffect } from "react";
import GlobalLoader from "@/components/GlobalLoader";
import { useNetworkPentestContext } from "./NetworkPentestContext";

let progress = 10;
export default function NetworkPentestProgressBar({ pentestIdName }: { pentestIdName: string }) {
    const [pentestId, pentestName] = decodeURIComponent(pentestIdName).split("_");
    // const { pentestData, loading, error, setPentestId } = useNetworkPentestContext();

    // useEffect(() => {
    //     if (typeof pentestId === 'string') {
    //         setPentestId(pentestId);
    //     }
    // }, [pentestId]);

    // if (error) return <div>{error}</div>;
    // if (!pentestData && !loading) return <div></div>;
    // if (loading || !pentestData) return <GlobalLoader />;

    // progress = Math.round(pentestData.networkDetails.progress);

    return (
        <>
            <div className="flex items-center gap-2">
                <div className="w-40 bg-gray-200 rounded-full h-2.5">
                    <div className="bg-blue-600 h-2.5 rounded-full" style={{ width: `${progress}%` }}></div>
                </div>
                <div className="text-xs text-widget-mainDesc mt-1">{progress}%</div>
            </div>
        </>
    );
}