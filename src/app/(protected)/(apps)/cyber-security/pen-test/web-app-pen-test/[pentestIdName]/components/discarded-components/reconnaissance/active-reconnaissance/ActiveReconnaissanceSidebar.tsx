'use client';

import React, { useState } from 'react';
import { ScanSearch, TextSearch } from 'lucide-react';
import { Card, Tab, TabGroup, TabList, TabPanel, TabPanels } from '@tremor/react';
import NoSavedPentestTemplate from '../../NoSavedPentestTemplate';
import ActiveReconOverview from './components/ActiveReconOverview';

export default function ActiveReconnaissanceSidebar({ pentestIdName }: { pentestIdName: string; }) {
  const [selectedIndex, setSelectedIndex] = useState(0);
  const [pentestId, pentestNameInUrl] = pentestIdName.split("_");
  const pentestName = pentestNameInUrl.split('-').map(word => word.charAt(0).toUpperCase() + word.slice(1)).join(' ');

  const tabData = [
    {
      tabName: 'Overview',
      Icon: ScanSearch,
    },
    {
      tabName: 'Sub Domains',
      Icon: TextSearch,
    },
    {
      tabName: 'Open Ports',
      Icon: TextSearch,
    },
    {
      tabName: 'Technologies Detected',
      Icon: TextSearch,
    },
  ];

  return (
    <>
      <Card className="bg-tremor-background-muted p-0 dark:bg-dark-tremor-background-muted">
        <TabGroup>
          <TabList className="flex flex-col gap-2 w-64 border-r border-gray-200 dark:border-gray-700 bg-tremor-background-muted dark:bg-dark-tremor-background-muted p-2">
            {tabData.map((eachTab, index) => {
              // const isActive = pathname === eachTab.href;
              return (
                <Tab
                  key={eachTab.tabName}
                  onClick={() => setSelectedIndex(index)}
                  className={`flex items-center gap-2 px-3 py-2 text-sm rounded-md border-0 hover:border-0 data-[selected]:border-0
                      ${selectedIndex === index
                      ? "bg-primary text-gray-50"
                      : "text-gray-700 dark:text-gray-400 hover:bg-gray-100 hover:text-gray-900 hover:dark:text-gray-50 hover:dark:bg-gray-800"}
                    `}

                // className="pb-2.5 font-medium hover:border-gray-300 flex items-center space-x-2"
                >
                  <div className="flex items-center justify-between gap-2 font-medium text-tremor-content-strong dark:text-dark-tremor-content-strong">
                    <eachTab.Icon className="-ml-1 size-4" aria-hidden="true" />
                    {eachTab.tabName}
                  </div>
                </Tab>
              )
            })}
          </TabList>

          <TabPanels className="flex-1 p-4">
            <TabPanel
              key={`${pentestIdName}_active_reconnaissance_overview`}
              className="p-4"
            >
              {<ActiveReconOverview />}
            </TabPanel>
            <TabPanel
              key={`${pentestIdName}_reconnaissance`}
              className="p-4"
            >
              {<NoSavedPentestTemplate pentestIdName={pentestIdName} />}
            </TabPanel>
          </TabPanels>
        </TabGroup>
      </Card>
    </>
  );
}
