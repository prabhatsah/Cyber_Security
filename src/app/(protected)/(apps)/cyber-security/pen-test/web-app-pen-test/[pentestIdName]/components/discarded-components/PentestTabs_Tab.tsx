'use client';

import React from 'react';
import { Card, Tab, TabGroup, TabList, TabPanel, TabPanels } from '@tremor/react';
import NoSavedPentestTemplate from '../NoSavedPentestTemplate';
import { PenTestModified } from '../../../components/type';
import ReconnaissanceWidget from './reconnaissance/ReconnaissanceWidget';

export default function PentestTabs({ pentestIdName, pentestData }: { pentestIdName: string; pentestData: PenTestModified }) {
    // const pathname = usePathname();

    const tabData = [
        {
            pentestState: 'Planning',
            componentData: pentestData.basicDetails,
            ComponentName: NoSavedPentestTemplate,
        },
        {
            pentestState: 'Reconnaissance',
            componentData: pentestData.reconnaissance,
            ComponentName: NoSavedPentestTemplate,
        },
        {
            pentestState: 'Vulnerability Scanning',
            componentData: pentestData.vulnerabilityScanning,
            ComponentName: NoSavedPentestTemplate,
        },
        {
            pentestState: 'Exploitation',
            componentData: pentestData.exploitation,
            ComponentName: NoSavedPentestTemplate,
        },
        {
            pentestState: 'Post Exploitation',
            componentData: pentestData.postExploitation,
            ComponentName: NoSavedPentestTemplate,
        },
        {
            pentestState: 'AI Analysis',
            componentData: pentestData.aiAnalysis,
            ComponentName: NoSavedPentestTemplate,
        },
    ];

    return (
        <>
            <Card className="bg-tremor-background-muted p-0 dark:bg-dark-tremor-background-muted">
                <TabGroup>
                    <TabList className="bg-tremor-background-muted px-6 pt-2 dark:bg-dark-tremor-background-muted mb-2">
                        <>
                            {tabData.map((eachTab, index) => {
                                // const isActive = pathname === eachTab.href;
                                return (
                                    <Tab
                                        key={eachTab.pentestState}
                                        className="pb-2.5 font-medium hover:border-gray-300 flex items-center space-x-2"
                                    >
                                        <div className="flex items-center justify-between gap-4 font-medium text-tremor-content-strong dark:text-dark-tremor-content-strong">
                                            <div className='flex items-center gap-2'>
                                                <span>{index + 1}.</span>
                                                {eachTab.pentestState}
                                            </div>
                                            {/* {eachTab.componentData !== null && (
                                                <div className='flex items-center justify-center h-5 w-5 rounded-full bg-green-500 text-white'>
                                                    <RiCheckFill />
                                                </div>
                                            )} */}
                                        </div>
                                    </Tab>
                                )
                            })}
                        </>
                    </TabList>

                    <TabPanels>
                        <TabPanel
                            key={`${pentestIdName}_basicDetails`}
                            className="p-4"
                        >
                            {/* {<BasicDetailsWidget pentestIdName={pentestIdName} pentestSubPartData={pentestData.basicDetails} />} */}
                        </TabPanel>
                        <TabPanel
                            key={`${pentestIdName}_reconnaissance`}
                            className="p-4"
                        >
                            {<ReconnaissanceWidget pentestIdName={pentestIdName} pentestSubPartData={pentestData.reconnaissance} />}
                        </TabPanel>
                        <TabPanel
                            key={`${pentestIdName}_vulnerabilityScanning`}
                            className="p-4"
                        >
                            {<NoSavedPentestTemplate pentestIdName={pentestIdName} pentestSubPartData={pentestData.vulnerabilityScanning} />}
                        </TabPanel>
                        <TabPanel
                            key={`${pentestIdName}_exploitation`}
                            className="p-4"
                        >
                            {<NoSavedPentestTemplate pentestIdName={pentestIdName} pentestSubPartData={pentestData.exploitation} />}
                        </TabPanel>
                        <TabPanel
                            key={`${pentestIdName}_postExploitation`}
                            className="p-4"
                        >
                            {<NoSavedPentestTemplate pentestIdName={pentestIdName} pentestSubPartData={pentestData.postExploitation} />}
                        </TabPanel>
                        <TabPanel
                            key={`${pentestIdName}_aiAnalysis`}
                            className="p-4"
                        >
                            {<NoSavedPentestTemplate pentestIdName={pentestIdName} pentestSubPartData={pentestData.aiAnalysis} />}
                        </TabPanel>
                    </TabPanels>
                </TabGroup>
            </Card>
        </>
    );
}
